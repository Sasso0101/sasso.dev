---
import '../styles/fonts.css';

interface Props {
  title: string;
  description?: string;
}

const { title, description = "Salvatore Andaloro" } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

		<script is:inline>
      const theme = (() => {
        if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
          return localStorage.getItem('theme');
        }
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
          return 'dark';
        }
        return 'light';
      })();
    
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    </script>
  </head>
  <body class="bg-white text-zinc-900 dark:bg-zinc-950 dark:text-zinc-300 font-serif antialiased selection:bg-orange-200 selection:text-orange-900">
    <div class="max-w-5xl mx-auto px-6 py-8">
			<header class="mb-14 sm:mb-8 flex flex-wrap items-center gap-x-6 gap-y-3 text-sm font-bold tracking-widest uppercase text-zinc-600 dark:text-zinc-400">
					<a href="/" class="text-zinc-900 dark:text-zinc-100 -ml-2 p-2 hover:text-accent-500 transition-colors inline-flex items-center gap-2 hover:underline" aria-label="Home">
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
							Home
					</a>
					<a href="/blog" class="hover:text-accent-500 hover:underline underline-offset-4 decoration-2 transition-colors">Blog</a>
					<a href="/bookmarks" class="hover:text-accent-500 hover:underline underline-offset-4 decoration-2 transition-colors">Bookmarks</a>
					<a href="/personal" class="hover:text-accent-500 hover:underline underline-offset-4 decoration-2 transition-colors">Personal</a>

					<button id="theme-toggle" class="ml-auto p-2 text-zinc-500 hover:text-accent-500 dark:text-zinc-400 dark:hover:text-accent-500 transition-colors" aria-label="Toggle Dark Mode">
						{/* Sun Icon (Visible in Dark Mode) */}
						<svg id="sun-icon" class="hidden dark:block" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2"/><path d="M12 21v2"/><path d="M4.22 4.22l1.42 1.42"/><path d="M18.36 18.36l1.42 1.42"/><path d="M1 12h2"/><path d="M21 12h2"/><path d="M4.22 19.78l1.42-1.42"/><path d="M18.36 5.64l1.42-1.42"/></svg>
						
						{/* Moon Icon (Visible in Light Mode) */}
						<svg id="moon-icon" class="block dark:hidden" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
				</button>
			</header>
            
      <main>
        <slot />
      </main>

			<script>
				const handleToggleClick = () => {
					const element = document.documentElement;
					element.classList.toggle("dark");

					const isDark = element.classList.contains("dark");
					localStorage.setItem("theme", isDark ? "dark" : "light");
				}

				document.getElementById("theme-toggle")?.addEventListener("click", handleToggleClick);
			</script>
    </div>
  </body>
</html>